(this.webpackJsonpaviasalestest=this.webpackJsonpaviasalestest||[]).push([[0],{10:function(e,t,a){e.exports={box:"common_box__1T4yX"}},105:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),i=a.n(c),s=(a(67),a(32)),o=a(7),u=a(50),l=a.n(u),f=a(51),_=a.n(f),m=a(34),p=a.n(m),b=function(){return r.a.createElement("header",{className:p.a.header},r.a.createElement("img",{className:p.a.logo,src:_.a,alt:"Site logo"}))},E=a(52),v=a.n(E),d=a(24),h=a.n(d),T=a(10),k=a.n(T),x=a(25),g=a.n(x),y=function(e){var t=e.text,a=e.name,n=e.checked,c=e.clickHandler;return r.a.createElement("li",null,r.a.createElement("label",{className:g.a.label,htmlFor:a},r.a.createElement("input",{type:"checkbox",onChange:c,checked:n,className:g.a.input,id:a,name:a,value:a}),r.a.createElement("span",{className:g.a.checkbox}),t))},C=[{text:"\u0412\u0441\u0435",name:"filter__all__transfer",value:"all"},{text:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",name:"filter__without__transfer",value:"0"},{text:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",name:"filter__one__transfer",value:"1"},{text:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",name:"filter__two__transfer",value:"2"},{text:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",name:"filter__three__transfer",value:"3"}],j=a(61),O=a(21),S=a(5),F=a(14),w=a(11),I=a(26),N=a.n(I),H={arrayFormat:"comma"},K=function(e){var t=Object(w.d)(),a=Object(w.e)(),r=Object(n.useState)({}),c=Object(F.a)(r,2),i=c[0],s=c[1],o=Object(n.useState)([]),u=Object(F.a)(o,2),l=u[0],f=u[1],_=Object(n.useCallback)((function(e,t){return!!e&&("string"===typeof e?e===t:e.includes(t))}),[]),m=Object(n.useCallback)((function(e,a){t.push({search:N.a.stringify(Object(S.a)(Object(S.a)({},i),{},Object(O.a)({},e,a)),H)})}),[t,i]),p=Object(n.useCallback)((function(e){var t=i[e];return t?Array.isArray(t)?t:[t]:[]}),[i]),b=Object(n.useCallback)((function(e){var t={};return e.forEach((function(e){var a=i[e];a&&(t[e]=Array.isArray(a)?a:[a])})),t}),[i]),E=Object(n.useCallback)((function(e){var a=Object(S.a)({},i);delete a[e],t.push({search:N.a.stringify(a,H)})}),[i,t]),v=Object(n.useCallback)((function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=i[e],r=_(n,t);r?a&&(Array.isArray(n)?m(e,n.filter((function(e){return e!==t}))):E(e)):Array.isArray(n)?m(e,[].concat(Object(j.a)(n),[t])):m(e,n?[n,t]:t)}),[i,_,m,E]);return Object(n.useEffect)((function(){s(N.a.parse(a.search,H))}),[a]),Object(n.useEffect)((function(){e&&f(p(e))}),[p,e]),{changeKeyValue:m,queryToggle:v,hasKeyValue:_,getKeyValues:p,getKeysValues:b,queryRemove:E,defValue:l}},A=function(){var e=K("filter"),t=e.defValue,a=e.queryToggle,n=e.queryRemove;return r.a.createElement("div",{className:h.a.filter},r.a.createElement("div",{className:"".concat(h.a.wrapper," ").concat(k.a.box)},r.a.createElement("h3",{className:h.a.title},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.a.createElement("ul",null,C.map((function(e){var c=e.name,i=e.text,s=e.value;return r.a.createElement(y,{key:c,clickHandler:function(){s&&"all"!==s?a("filter",s):n("filter")},checked:t.includes(s)||!t.length&&"all"===s,text:i,name:c})})))))},R=a(54),B=a.n(R),P=a(37),L=a.n(P),D=function(e){var t=e.text,a=e.active,n=e.clickHandler;return r.a.createElement("button",{onClick:n,type:"button",className:"".concat(L.a.button," ").concat(a?L.a.active:"")},t)},V={by_price:"by_price",by_time:"by_time"},q=function(){var e=K("sort"),t=e.changeKeyValue,a=e.defValue,c=Object(n.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=V[a[0]];return n?a[0]===e:t}),[a]);return r.a.createElement("div",{className:B.a.sort},r.a.createElement(D,{text:"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439",active:c("by_price",!0),clickHandler:function(){t("sort","by_price")}}),r.a.createElement(D,{text:"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439",active:c("by_time"),clickHandler:function(){t("sort","by_time")}}))},U=a(55),J=a.n(U),M=a(27),Y=a.n(M),z=a(56),G=a.n(z),W=function(){return r.a.createElement("div",{className:"".concat(Y.a.wrapper," ").concat(k.a.box)},r.a.createElement("p",{className:Y.a.text},"\u0417\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0431\u0438\u043b\u0435\u0442\u044b..."),r.a.createElement("img",{className:Y.a.image,src:G.a,alt:"loader"}))},X=a(28),Q=a.n(X),Z={"timeout of 1500ms exceeded":"\u0418\u0441\u0442\u0435\u043a\u043b\u043e \u0432\u0440\u0435\u043c\u044f \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f! (timeout)","Request failed with status code 404":"\u0421\u0435\u0440\u0432\u0435\u0440 \u043d\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442! (404)","Request failed with status code 500":"\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0442\u0432\u0435\u0442\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430! (505)"},$=function(e){var t=e.refreshTicketsList,a=Object(o.c)((function(e){return e.tickets.error}));return r.a.createElement("div",{className:"".concat(k.a.box," ").concat(Q.a.wrapper)},r.a.createElement("p",{className:Q.a.text},Z[a]?Z[a]:"\u041d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u0430\u044f \u043e\u0448\u0438\u0431\u043a\u0430!"),r.a.createElement("button",{onClick:t,className:Q.a.button,type:"button"},"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437?"))},ee=a(29),te=a.n(ee),ae=function(e){var t=e.title,a=e.text;return r.a.createElement("div",{className:te.a.container},r.a.createElement("div",{className:te.a.title},t),r.a.createElement("div",{className:te.a.text},a||"- / -"))},ne=a(30),re=a.n(ne),ce=function(e){return e<10?"0".concat(e):"".concat(e)},ie=["\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","1 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","2 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","3 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","4 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","5 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","6 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","7 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","8 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","9 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a","10 \u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"],se=function(e){var t=e%60;return"".concat((e-t)/60,"\u0447 ").concat(t,"\u043c")},oe=function(e,t){var a=Date.parse(e),n=new Date(e),r=new Date(a+60*t*1e3),c=ce(n.getHours()),i=ce(r.getHours()),s=ce(r.getMinutes()),o=ce(n.getMinutes()),u="".concat(c,":").concat(o),l="".concat(i,":").concat(s);return"".concat(u," - ").concat(l)},ue=function(e){var t,a=e.ticket,n=a.price,c=a.carrier,i=a.segments,s=i[0],o=s.origin,u=s.destination,l=s.date,f=s.stops,_=s.duration,m=i[1],p=m.origin,b=m.destination,E=m.date,v=m.stops,d=m.duration;return r.a.createElement("li",{className:"".concat(re.a.ticket," ").concat(k.a.box)},r.a.createElement("div",{className:re.a.price},(t=n,new Intl.NumberFormat("ru-RU").format(t))," P"),r.a.createElement("img",{className:re.a.image,src:"https://pics.avs.io/99/36/".concat(c,".png"),alt:"airport"}),r.a.createElement(ae,{title:"".concat(o," - ").concat(u),text:oe(l,_)}),r.a.createElement(ae,{title:"\u0412 \u043f\u0443\u0442\u0438",text:se(_)}),r.a.createElement(ae,{title:ie[f.length],text:f.join()}),r.a.createElement(ae,{title:"".concat(p," - ").concat(b),text:oe(E,d)}),r.a.createElement(ae,{title:"\u0412 \u043f\u0443\u0442\u0438",text:se(d)}),r.a.createElement(ae,{title:ie[v.length],text:v.join()}))},le=a(6),fe=a.n(le),_e=a(12),me=a(57),pe=a.n(me),be=a(58),Ee=a.n(be),ve=pe.a.create({baseURL:"https://front-test.beta.aviasales.ru/",timeout:1500});Ee()(ve,{retries:2});var de,he,Te=function(){var e=Object(_e.a)(fe.a.mark((function e(t){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=Object(_e.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Te("search"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Object(_e.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Te("/tickets?searchId=".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();!function(e){e.BY_PRICE="BY_PRICE",e.BY_SPEED="BY_SPEED"}(de||(de={})),function(e){e.START_FETCH_TICKETS="START_FETCH_TICKETS",e.STOP_FETCH_TICKETS="STOP_FETCH_TICKETS",e.FETCH_TICKETS_FAILED="FETCH_TICKETS_FAILED",e.FETCH_TICKETS_SUCCESS="FETCH_TICKETS_SUCCESS"}(he||(he={}));var ge=function(e){return e.sort((function(e,t){return e.price-t.price}))},ye=function(e){return e.sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)}))},Ce=function(){var e=Object(o.b)(),t=function(){var e=K().getKeysValues,t=Object(o.c)((function(e){return e.tickets.list})),a=Object(o.c)((function(e){return e.tickets.isFetchingTickets})),r=Object(o.c)((function(e){return e.tickets.error})),c=Object(n.useState)([]),i=Object(F.a)(c,2),s=i[0],u=i[1],l=Object(n.useState)({}),f=Object(F.a)(l,2),_=f[0],m=f[1];return Object(n.useEffect)((function(){m(e(["filter","sort"]))}),[e]),Object(n.useEffect)((function(){var e,a=[];if(_.sort)switch(_.sort[0]){case"by_time":a.push(ye);break;case"by_price":default:a.push(ge)}else a.push(ge);if(_.filter){var n=Array.isArray(_.filter)?_.filter:[_.filter];a.push((e=n,function(t){return t.filter((function(t){if(!e.length)return t;var a=t.segments[0].stops.length+t.segments[1].stops.length;return e.includes("".concat(a))}))}))}u(function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,n=e.slice();return t.length&&t.forEach((function(e){e&&(n=e(n))})),n=n.slice(0,a)}(t,a))}),[t,_]),{tickets:s,isFetching:a,error:r}}(),a=t.tickets,c=t.error,i=t.isFetching,s=Object(n.useCallback)((function(){e(function(){var e=Object(_e.a)(fe.a.mark((function e(t){var a,n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:he.START_FETCH_TICKETS}),e.prev=1,e.next=4,ke();case 4:return a=e.sent,n=a.searchId,r=function(){var e=Object(_e.a)(fe.a.mark((function e(a){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe(a);case 2:if(n=e.sent,t((c=n.tickets,{type:he.FETCH_TICKETS_SUCCESS,payload:c})),n.stop){e.next=7;break}return e.next=7,r(a);case 7:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=9,r(n);case 9:return e.abrupt("return",t({type:he.STOP_FETCH_TICKETS}));case 12:return e.prev=12,e.t0=e.catch(1),e.abrupt("return",t((c=e.t0.message,{type:he.FETCH_TICKETS_FAILED,payload:c})));case 15:case"end":return e.stop()}var c}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}())}),[e]);return Object(n.useEffect)((function(){s()}),[s]),r.a.createElement("ul",{className:J.a.tickets},i&&r.a.createElement(W,null),!i&&c&&r.a.createElement($,{refreshTicketsList:s}),a.slice(0,5).map((function(e){return r.a.createElement(ue,{key:"".concat(e.price).concat(e.segments[0].date).concat(e.carrier),ticket:e})})))},je=function(){return r.a.createElement("main",{className:v.a.container},r.a.createElement(A,null),r.a.createElement(q,null),r.a.createElement(Ce,null))},Oe=a(9),Se=a(59),Fe=a(60),we={list:[],sortType:de.BY_PRICE,isFetchingTickets:!1,error:""},Ie=Object(Oe.combineReducers)({tickets:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he.START_FETCH_TICKETS:return Object(S.a)(Object(S.a)({},e),{},{list:[],error:"",isFetchingTickets:!0});case he.STOP_FETCH_TICKETS:return Object(S.a)(Object(S.a)({},e),{},{isFetchingTickets:!1});case he.FETCH_TICKETS_SUCCESS:return Object(S.a)(Object(S.a)({},e),{},{list:e.list.concat(t.payload)});case he.FETCH_TICKETS_FAILED:return Object(S.a)(Object(S.a)({},e),{},{isFetchingTickets:!1,error:t.payload});default:return e}}}),Ne=Object(Oe.createStore)(Ie,Object(Se.composeWithDevTools)(Object(Oe.applyMiddleware)(Fe.a))),He=function(){return r.a.createElement(o.a,{store:Ne},r.a.createElement("div",{className:l.a.container},r.a.createElement(b,null),r.a.createElement(je,null)))};i.a.render(r.a.createElement(s.a,{basename:"/AviasalesTest"},r.a.createElement(r.a.StrictMode,null,r.a.createElement(He,null))),document.getElementById("root"))},24:function(e,t,a){e.exports={filter:"Filter_filter__2qU36",wrapper:"Filter_wrapper__hPpeG",title:"Filter_title__3R7Xg"}},25:function(e,t,a){e.exports={label:"CheckBox_label__3V3aj",checkbox:"CheckBox_checkbox__y8PrJ",input:"CheckBox_input__zBkPW"}},27:function(e,t,a){e.exports={wrapper:"Loader_wrapper__vR7c9",image:"Loader_image__3RupG",text:"Loader_text__16Axc"}},28:function(e,t,a){e.exports={wrapper:"Error_wrapper__2IKMv",text:"Error_text__2kR2U",button:"Error_button__J_1Em"}},29:function(e,t,a){e.exports={container:"TicketInfo_container__L7j5D",title:"TicketInfo_title__Omcj-",text:"TicketInfo_text__1iKv8"}},30:function(e,t,a){e.exports={ticket:"Ticket_ticket__3NE55",price:"Ticket_price__cJb_z",image:"Ticket_image__2Pf_q"}},34:function(e,t,a){e.exports={header:"Header_header__34B2S",logo:"Header_logo__3BNsK"}},37:function(e,t,a){e.exports={button:"Button_button__1AJp4",active:"Button_active__hwebA"}},50:function(e,t,a){e.exports={container:"App_container__2Ehqj"}},51:function(e,t,a){e.exports=a.p+"static/media/logo.c4580fba.svg"},52:function(e,t,a){e.exports={container:"SearchPage_container__l759l"}},54:function(e,t,a){e.exports={sort:"SortControls_sort__1vB_7"}},55:function(e,t,a){e.exports={tickets:"TicketsList_tickets__2gdvp"}},56:function(e,t,a){e.exports=a.p+"static/media/spinner.f7f06c52.svg"},62:function(e,t,a){e.exports=a(105)},67:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.e228657d.chunk.js.map